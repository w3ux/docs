import { Callout } from 'vocs/components'

# ExtensionAccountsProvider

Connect to available extensions and subscribe to accounts.

[source](https://github.com/w3ux/w3ux-library/tree/main/library/react-connect-kit/src/ExtensionAccountsProvider)

## Requirements

- [`ExtensionsProvider`](/library/react-connect-kit/extensions): Must wrap `ExtensionAccountsProvider` to provide the available extensions.

## Usage

`ExtensionAccountsProvider` provides a simple means of connecting to web3 extensions that implement the `window.injectedWeb3` interface, and subscribes to their accounts. It automatically re-connects to extensions on subsequent visits, and allows dApps to set an active account if found in an extension.

<Callout type="note">
  This provider prevents the multiple pop-up issue (all available extensions popping up when connecting to extensions) by design. Such behaviour should be treated as an anti-pattern and be avoided.
</Callout>

<Callout type="note">
  EVM accounts are not currently supported by `ExtensionAccountsProvider`.
</Callout>

<Callout type="warning">
  When React.StrictMode is used inside the Application, it should be placed after the ExtensionsProvider and `ExtensionAccountsProvider`, or the providers will not work;
</Callout>

Wrap your app with `ExtensionAccountsProvider` and provide the required props. Note that `ExtensionsProvider` is also required, in order to provide the available extensions to connect to. The required props are referenced further down.

```tsx
import {
    ExtensionsProvider,
    ExtensionAccountsProvider,
  } from '@w3ux/react-connect-kit';

const AppWithProviders = () => {
  // Dapp identifier
  const dappName = "My Dapp Name";

  // SS58 prefix of the current network
  const ss58 = 0;

  return (
    <ExtensionsProvider>
      <ExtensionAccountsProvider
        dappName={dappName}
        ss58={ss58}
      >
      <App />
    </ExtensionAccountsProvider>
  );
);
```

### Connecting Extensions

With the providers in place, you can call `connectExtension` to connect to an extension. The following example attempts to find and connect to Subwallet JS upon a button click.

```tsx
import {
    useExtensionAccounts,
  } from '@w3ux/react-connect-kit';

const ConnectAccounts = () => {
  const { connectExtension } = useExtensionAccounts();

  return (
    <>
      <button
        type="button"
        onClick={() => {
          if (extension) connectExtension('subwallet-js');
        }}
      >
        Connect to Subwallet JS
      </button>
      <App />
    </>
  );
);
```

## Props

#### dappName
`string`

#### ss58
`number`

The SS58 prefix of the current network.

## Values

#### extensionsInitialised
`string[]`

A record of the extensions that have been initialised along with their status.


#### connectExtension
`(id: string): Promise<boolean>`

Call this function to connect to the provided extension id and subscribe to its accounts.

#### getExtensionAccounts
`(ss58: number) => ImportedAccount[]`

Geta a list of available extension accounts, formatted by the provided ss58 prefix.

#### extensionsSynced
`'unsynced' | 'syncing' | 'synced'`

Signals whether extensions are still being synced upon being initialised.